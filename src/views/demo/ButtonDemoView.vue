<template>
    <div class="button-demo">
        <h2>æŒ‰é’®ç»„ä»¶æ¼”ç¤º</h2>

        <!-- åŸºç¡€ç”¨æ³• -->
        <section class="demo-section">
            <h3>åŸºç¡€ç”¨æ³•</h3>
            <div class="button-group">
                <BaseButton>é»˜è®¤æŒ‰é’®</BaseButton>
                <BaseButton type="primary">ä¸»è¦æŒ‰é’®</BaseButton>
                <BaseButton type="secondary">æ¬¡è¦æŒ‰é’®</BaseButton>
                <BaseButton type="success">æˆåŠŸæŒ‰é’®</BaseButton>
                <BaseButton type="warning">è­¦å‘ŠæŒ‰é’®</BaseButton>
                <BaseButton type="danger">å±é™©æŒ‰é’®</BaseButton>
                <BaseButton type="info">ä¿¡æ¯æŒ‰é’®</BaseButton>
            </div>
        </section>

        <!-- æœ´ç´ æŒ‰é’® -->
        <section class="demo-section">
            <h3>æœ´ç´ æŒ‰é’®</h3>
            <div class="button-group">
                <BaseButton plain>æœ´ç´ æŒ‰é’®</BaseButton>
                <BaseButton type="primary" plain>ä¸»è¦æŒ‰é’®</BaseButton>
                <BaseButton type="secondary" plain>æ¬¡è¦æŒ‰é’®</BaseButton>
                <BaseButton type="success" plain>æˆåŠŸæŒ‰é’®</BaseButton>
                <BaseButton type="warning" plain>è­¦å‘ŠæŒ‰é’®</BaseButton>
                <BaseButton type="danger" plain>å±é™©æŒ‰é’®</BaseButton>
                <BaseButton type="info" plain>ä¿¡æ¯æŒ‰é’®</BaseButton>
            </div>
        </section>

        <!-- æ–‡å­—æŒ‰é’® -->
        <section class="demo-section">
            <h3>æ–‡å­—æŒ‰é’®</h3>
            <div class="button-group">
                <BaseButton type="text">æ–‡å­—æŒ‰é’®</BaseButton>
                <BaseButton type="link">é“¾æ¥æŒ‰é’®</BaseButton>
                <BaseButton type="text" disabled>ç¦ç”¨æ–‡å­—æŒ‰é’®</BaseButton>
            </div>
        </section>

        <!-- ä¸åŒå°ºå¯¸ -->
        <section class="demo-section">
            <h3>ä¸åŒå°ºå¯¸</h3>
            <div class="button-group">
                <BaseButton type="primary" size="mini">è¿·ä½ æŒ‰é’®</BaseButton>
                <BaseButton type="primary" size="small">å°å‹æŒ‰é’®</BaseButton>
                <BaseButton type="primary" size="medium">ä¸­ç­‰æŒ‰é’®</BaseButton>
                <BaseButton type="primary" size="large">å¤§å‹æŒ‰é’®</BaseButton>
            </div>
        </section>

        <!-- ç‰¹æ®Šå½¢çŠ¶ -->
        <section class="demo-section">
            <h3>ç‰¹æ®Šå½¢çŠ¶</h3>
            <div class="button-group">
                <BaseButton type="primary" round>åœ†è§’æŒ‰é’®</BaseButton>
                <BaseButton type="primary" circle icon="âš™">åœ†å½¢æŒ‰é’®</BaseButton>
                <BaseButton type="primary" circle icon="+" size="small"></BaseButton>
                <BaseButton type="danger" circle icon="Ã—" size="mini"></BaseButton>
            </div>
        </section>

        <!-- å›¾æ ‡æŒ‰é’® -->
        <section class="demo-section">
            <h3>å›¾æ ‡æŒ‰é’®</h3>
            <div class="button-group">
                <BaseButton type="primary" icon="ğŸ“">ç¼–è¾‘</BaseButton>
                <BaseButton type="danger" icon="ğŸ—‘">åˆ é™¤</BaseButton>
                <BaseButton type="success" icon="âœ“">ç¡®å®š</BaseButton>
                <BaseButton type="warning" icon="âš ">è­¦å‘Š</BaseButton>
                <BaseButton type="primary" icon="ğŸ“" icon-position="right">æ–‡ä»¶å¤¹</BaseButton>
                <BaseButton type="primary" icon="âš™" circle></BaseButton>
            </div>
        </section>

        <!-- åŠ è½½çŠ¶æ€ -->
        <section class="demo-section">
            <h3>åŠ è½½çŠ¶æ€</h3>
            <div class="button-group">
                <BaseButton type="primary" :loading="loading1" @click="handleLoad1">
                    {{ loading1 ? 'åŠ è½½ä¸­...' : 'ç‚¹å‡»åŠ è½½' }}
                </BaseButton>
                <BaseButton type="success" :loading="loading2" icon="ğŸ’¾" @click="handleLoad2">
                    {{ loading2 ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜' }}
                </BaseButton>
                <BaseButton type="primary" :loading="true" circle></BaseButton>
            </div>
        </section>

        <!-- ç¦ç”¨çŠ¶æ€ -->
        <section class="demo-section">
            <h3>ç¦ç”¨çŠ¶æ€</h3>
            <div class="button-group">
                <BaseButton disabled>é»˜è®¤æŒ‰é’®</BaseButton>
                <BaseButton type="primary" disabled>ä¸»è¦æŒ‰é’®</BaseButton>
                <BaseButton type="success" disabled plain>æœ´ç´ æŒ‰é’®</BaseButton>
                <BaseButton type="text" disabled>æ–‡å­—æŒ‰é’®</BaseButton>
            </div>
        </section>

        <!-- å—çº§æŒ‰é’® -->
        <section class="demo-section">
            <h3>å—çº§æŒ‰é’®</h3>
            <div class="block-demo">
                <BaseButton type="primary" block>å—çº§æŒ‰é’®</BaseButton>
                <BaseButton type="success" block icon="âœ“">ç¡®è®¤æäº¤</BaseButton>
            </div>
        </section>

        <!-- æŒ‰é’®ç»„ -->
        <section class="demo-section">
            <h3>æŒ‰é’®ç»„</h3>
            <div class="button-group">
                <BaseButton type="primary">ä¸Šä¸€é¡µ</BaseButton>
                <BaseButton type="primary">ä¸‹ä¸€é¡µ</BaseButton>
            </div>
            <br><br>
            <div class="button-group">
                <BaseButton type="primary" icon="â¬…">åé€€</BaseButton>
                <BaseButton type="primary" icon="â¬†">ä¸Šä¼ </BaseButton>
                <BaseButton type="primary" icon="â¡">å‰è¿›</BaseButton>
            </div>
        </section>

        <!-- å®é™…åº”ç”¨åœºæ™¯ -->
        <section class="demo-section">
            <h3>å®é™…åº”ç”¨åœºæ™¯</h3>

            <!-- è¡¨å•æ“ä½œ -->
            <div class="use-case">
                <h4>è¡¨å•æ“ä½œ</h4>
                <div class="button-group">
                    <BaseButton type="primary" @click="handleSubmit">æäº¤</BaseButton>
                    <BaseButton @click="handleReset">é‡ç½®</BaseButton>
                    <BaseButton type="text" @click="handleCancel">å–æ¶ˆ</BaseButton>
                </div>
            </div>

            <!-- æ•°æ®æ“ä½œ -->
            <div class="use-case">
                <h4>æ•°æ®æ“ä½œ</h4>
                <div class="button-group">
                    <BaseButton type="primary" icon="+" size="small" @click="handleAdd">æ–°å¢</BaseButton>
                    <BaseButton type="warning" icon="ğŸ“" size="small" @click="handleEdit">ç¼–è¾‘</BaseButton>
                    <BaseButton type="danger" icon="ğŸ—‘" size="small" @click="handleDelete">åˆ é™¤</BaseButton>
                    <BaseButton type="info" icon="ğŸ‘" size="small" @click="handleView">æŸ¥çœ‹</BaseButton>
                </div>
            </div>

            <!-- é¡µé¢å¯¼èˆª -->
            <div class="use-case">
                <h4>é¡µé¢å¯¼èˆª</h4>
                <div class="button-group">
                    <BaseButton type="text" icon="ğŸ " @click="handleHome">é¦–é¡µ</BaseButton>
                    <BaseButton type="text" icon="â¬…" @click="handleBack">è¿”å›</BaseButton>
                    <BaseButton type="primary" icon="ğŸ’¾" @click="handleSaveAndNext">ä¿å­˜å¹¶ä¸‹ä¸€æ­¥</BaseButton>
                </div>
            </div>

            <!-- å·¥å…·æ  -->
            <div class="use-case">
                <h4>å·¥å…·æ </h4>
                <div class="toolbar">
                    <BaseButton type="primary" size="small" icon="ğŸ“">æ‰“å¼€</BaseButton>
                    <BaseButton size="small" icon="ğŸ’¾">ä¿å­˜</BaseButton>
                    <BaseButton size="small" icon="ğŸ“‹">å¤åˆ¶</BaseButton>
                    <BaseButton size="small" icon="ğŸ“„">ç²˜è´´</BaseButton>
                    <div class="divider"></div>
                    <BaseButton size="small" icon="â†¶">æ’¤é”€</BaseButton>
                    <BaseButton size="small" icon="â†·">é‡åš</BaseButton>
                    <div class="divider"></div>
                    <BaseButton type="danger" size="small" icon="ğŸ—‘">åˆ é™¤</BaseButton>
                </div>
            </div>
        </section>

        <!-- äº‹ä»¶æµ‹è¯• -->
        <section class="demo-section">
            <h3>äº‹ä»¶æµ‹è¯•</h3>
            <div class="button-group">
                <BaseButton type="primary" @click="showMessage('æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼')">ç‚¹å‡»æµ‹è¯•</BaseButton>
                <BaseButton type="success" @click="showMessage('æˆåŠŸæŒ‰é’®è¢«ç‚¹å‡»ï¼')">æˆåŠŸæµ‹è¯•</BaseButton>
                <BaseButton type="warning" @click="showMessage('è­¦å‘ŠæŒ‰é’®è¢«ç‚¹å‡»ï¼')">è­¦å‘Šæµ‹è¯•</BaseButton>
            </div>
            <p v-if="message" class="message">{{ message }}</p>
        </section>

        <!-- Toastç»„ä»¶æ¼”ç¤º -->
        <section class="demo-section">
            <h3>Toastç»„ä»¶æ¼”ç¤º</h3>
            
            <!-- åŸºæœ¬ç”¨æ³• -->
            <div class="toast-subsection">
                <h4>åŸºæœ¬ç”¨æ³•</h4>
                <div class="button-group">
                    <BaseButton type="success" @click="showSuccessToast">æˆåŠŸæç¤º</BaseButton>
                    <BaseButton type="warning" @click="showWarningToast">è­¦å‘Šæç¤º</BaseButton>
                    <BaseButton type="danger" @click="showErrorToast">é”™è¯¯æç¤º</BaseButton>
                    <BaseButton type="info" @click="showInfoToast">ä¿¡æ¯æç¤º</BaseButton>
                </div>
            </div>
            

            
            <!-- è‡ªå®šä¹‰é€‰é¡¹ -->
            <div class="toast-subsection">
                <h4>è‡ªå®šä¹‰é€‰é¡¹</h4>
                <div class="button-group">
                    <BaseButton @click="showCustomDurationToast">è‡ªå®šä¹‰æ—¶é•¿</BaseButton>
                </div>
            </div>
            
            <!-- é˜Ÿåˆ—æµ‹è¯• -->
            <div class="toast-subsection">
                <h4>é˜Ÿåˆ—æµ‹è¯•</h4>
                <div class="button-group">
                    <BaseButton @click="showMultipleToasts">æ˜¾ç¤ºå¤šä¸ªToast</BaseButton>
                    <BaseButton @click="showSixToasts">æµ‹è¯•è¶…è¿‡5æ¡é™åˆ¶</BaseButton>
                    <BaseButton @click="showTimedToasts">å®šæ—¶æ˜¾ç¤ºToast</BaseButton>
                </div>
            </div>
            
            <!-- ç¼–ç¨‹å¼è°ƒç”¨ -->
            <div class="toast-subsection">
                <h4>ç¼–ç¨‹å¼è°ƒç”¨</h4>
                <div class="code-example">
                    <pre><code>// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { getCurrentInstance } from 'vue'

const { proxy } = getCurrentInstance()

// æ˜¾ç¤ºæˆåŠŸæç¤º
proxy.$toast.success('æ“ä½œæˆåŠŸ')

// æ˜¾ç¤ºé”™è¯¯æç¤º
proxy.$toast.error('æ“ä½œå¤±è´¥', {
  duration: 5000,
  position: 'bottom'
})

// æ˜¾ç¤ºè‡ªå®šä¹‰æç¤º
proxy.$toast.show('è‡ªå®šä¹‰æ¶ˆæ¯', {
  type: 'warning',
  duration: 0, // ä¸è‡ªåŠ¨å…³é—­
  closeable: true,
  showIcon: true,
  position: 'middle'
})</code></pre>
                </div>
            </div>
        </section>
    </div>
</template>

<script setup>
import { ref, getCurrentInstance } from 'vue'
import BaseButton from '@/components/ui/BaseButton.vue'

const { proxy } = getCurrentInstance()

// åŠ è½½çŠ¶æ€
const loading1 = ref(false)
const loading2 = ref(false)
const message = ref('')

// åŠ è½½æµ‹è¯•
const handleLoad1 = () => {
    loading1.value = true
    setTimeout(() => {
        loading1.value = false
    }, 2000)
}

const handleLoad2 = () => {
    loading2.value = true
    setTimeout(() => {
        loading2.value = false
    }, 3000)
}

// è¡¨å•æ“ä½œ
const handleSubmit = () => {
    showMessage('è¡¨å•æäº¤æˆåŠŸï¼')
}

const handleReset = () => {
    showMessage('è¡¨å•å·²é‡ç½®')
}

const handleCancel = () => {
    showMessage('æ“ä½œå·²å–æ¶ˆ')
}

// æ•°æ®æ“ä½œ
const handleAdd = () => {
    showMessage('æ–°å¢æ“ä½œ')
}

const handleEdit = () => {
    showMessage('ç¼–è¾‘æ“ä½œ')
}

const handleDelete = () => {
    if (confirm('ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ')) {
        showMessage('åˆ é™¤æˆåŠŸ')
    }
}

const handleView = () => {
    showMessage('æŸ¥çœ‹è¯¦æƒ…')
}

// å¯¼èˆªæ“ä½œ
const handleHome = () => {
    showMessage('å›åˆ°é¦–é¡µ')
}

const handleBack = () => {
    showMessage('è¿”å›ä¸Šä¸€é¡µ')
}

const handleSaveAndNext = () => {
    showMessage('ä¿å­˜æˆåŠŸï¼Œå³å°†è·³è½¬åˆ°ä¸‹ä¸€æ­¥')
}

// æ¶ˆæ¯æ˜¾ç¤º
const showMessage = (msg) => {
    message.value = msg
    setTimeout(() => {
        message.value = ''
    }, 3000)
}

// Toastæ¼”ç¤ºæ–¹æ³•
const showSuccessToast = () => {
  proxy.$toast.success('æ“ä½œæˆåŠŸï¼')
}

const showWarningToast = () => {
  proxy.$toast.warning('è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªè­¦å‘Šä¿¡æ¯')
}

const showErrorToast = () => {
  proxy.$toast.error('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•')
}

const showInfoToast = () => {
  proxy.$toast.info('è¿™æ˜¯ä¸€æ¡æ™®é€šä¿¡æ¯')
}



// è‡ªå®šä¹‰é€‰é¡¹
const showCustomDurationToast = () => {
  proxy.$toast.success('5ç§’åè‡ªåŠ¨å…³é—­', { duration: 5000 })
}



// é˜Ÿåˆ—æµ‹è¯•æ–¹æ³•
const showMultipleToasts = () => {
  proxy.$toast.success('ç¬¬ä¸€æ¡æ¶ˆæ¯ï¼šæ“ä½œæˆåŠŸï¼')
  setTimeout(() => {
    proxy.$toast.warning('ç¬¬äºŒæ¡æ¶ˆæ¯ï¼šè¯·æ³¨æ„è­¦å‘Š')
  }, 500)
  setTimeout(() => {
    proxy.$toast.error('ç¬¬ä¸‰æ¡æ¶ˆæ¯ï¼šå‘ç”Ÿé”™è¯¯')
  }, 1000)
  setTimeout(() => {
    proxy.$toast.info('ç¬¬å››æ¡æ¶ˆæ¯ï¼šè¿™æ˜¯ä¸€æ¡ä¿¡æ¯')
  }, 1500)
}

const showSixToasts = () => {
  // æ˜¾ç¤º6æ¡Toastï¼Œæµ‹è¯•è¶…è¿‡5æ¡é™åˆ¶
  for (let i = 1; i <= 6; i++) {
    setTimeout(() => {
      const types = ['success', 'warning', 'error', 'info']
      const type = types[(i - 1) % types.length]
      proxy.$toast[type](`ç¬¬${i}æ¡æ¶ˆæ¯ï¼šæµ‹è¯•è¶…è¿‡5æ¡é™åˆ¶`)
    }, i * 300)
  }
}

const showTimedToasts = () => {
  // æ˜¾ç¤ºä¸åŒæ—¶é•¿çš„Toastï¼Œæµ‹è¯•æ¶ˆå¤±åå…¶ä»–Toastå‘ä¸Šè¡¥ä½
  proxy.$toast.success('1ç§’åæ¶ˆå¤±', { duration: 1000 })
  setTimeout(() => {
    proxy.$toast.warning('3ç§’åæ¶ˆå¤±', { duration: 3000 })
  }, 500)
  setTimeout(() => {
    proxy.$toast.error('5ç§’åæ¶ˆå¤±', { duration: 5000 })
  }, 1000)
  setTimeout(() => {
    proxy.$toast.info('2ç§’åæ¶ˆå¤±', { duration: 2000 })
  }, 1500)
}
</script>

<style lang="scss" scoped>
.button-demo {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;

    h2 {
        color: var(--text-color);
        margin-bottom: 30px;
        text-align: center;
    }

    .demo-section {
        margin-bottom: 40px;
        padding: 24px;
        background: var(--card-background);
        border-radius: 8px;
        border: 1px solid var(--border-color);

        h3 {
            color: var(--text-color);
            margin-bottom: 24px;
            font-size: 18px;
            font-weight: 600;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 8px;
        }

        h4 {
            color: var(--text-color);
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: 500;
        }
    }

    .button-group {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;

        .base-button {
            margin: 0;
        }
    }

    .block-demo {
        .base-button {
            margin-bottom: 12px;

            &:last-child {
                margin-bottom: 0;
            }
        }
    }

    .use-case {
        margin-bottom: 24px;

        &:last-child {
            margin-bottom: 0;
        }
    }

    .toolbar {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px;
        background: var(--input-background);
        border: 1px solid var(--border-color);
        border-radius: 4px;

        .divider {
            width: 1px;
            height: 20px;
            background: var(--border-color);
            margin: 0 4px;
        }

        .base-button {
            margin: 0;
        }
    }

    .message {
        margin-top: 16px;
        padding: 12px;
        background: rgba(var(--primary-color-rgb), 0.1);
        border-left: 4px solid var(--primary-color);
        color: var(--text-color);
        border-radius: 4px;
    }
    
    .toast-subsection {
        margin-bottom: 24px;
        
        &:last-child {
            margin-bottom: 0;
        }
        
        h4 {
            color: var(--text-color);
            margin-bottom: 16px;
            font-size: 16px;
            font-weight: 500;
        }
        
        .code-example {
            margin-top: 16px;
            padding: 16px;
            background-color: #f5f5f5;
            border-radius: 4px;
            overflow-x: auto;
            
            pre {
                margin: 0;
                font-family: 'Consolas', 'Monaco', monospace;
                font-size: 14px;
                line-height: 1.5;
                color: #333;
            }
            
            code {
                font-family: inherit;
            }
        }
    }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
    .button-demo {
        padding: 16px;

        .demo-section {
            padding: 16px;
        }

        .button-group {
            gap: 8px;
        }

        .toolbar {
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .code-example {
            background-color: #2d2d2d;
            
            pre {
                color: #f1f1f1;
            }
        }
    }
}
</style>